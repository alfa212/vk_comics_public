# Сбор комиксов и их публикация в группе ВК

Приложение собирает комиксы с сайта https://xkcd.com и публикует их в указанной группе ВК.

## Инструкция по установке и настройке

Для установки скрипта скопируйте следующие файлы в одну папку:

- main.py
- requirements.txt

Затем перейдите в терминале в данную папку и запустите команду:

```
pip install -r requirements.txt
```

Кроме этого для использования приложения необходимо создать файл `.env` в корневой папке и указать там две обязательных настройки:

Ключ доступа пользователя (токен) для публикации материалов в ВК. Можно получить здесь: https://dev.vk.com/api/access-token/implicit-flow-user

```
VK_ACCESS_TOKEN = 'Ваш токен'
```

ID группы в ВК, куда будут публиковаться комиксы (узнать ID вашей группы можно здесь: https://regvk.com/id):

```
VK_GROUP_ID = 'ID вашей группы'
```

## Запуск скрипта

Для запуска скрипта наберите в консоли следующую команду:

```
python3 main.py
```

После этого в течение нескольких секунд на стене вашей группы должен появиться изображение комикса с текстовым описанием.

## Использование

Приложение публикует случайный комикс с сайта https://xkcd.com. Каждый комикс может быть опубликован только один раз.
Чтобы не было повторов, номер публикуемого комикса сверяется со списком номеров ранее опубликованных. Список опубликованных комиксов сохраняется в файл `published_comics.json` (файл создается автоматически при первом запуске скрипта).

Чтобы публиковать комиксы периодически, добавьте задание на выполнение скрипта в планировщик Cron на вашем сервере.


За скачивание комиксов отвечают следующие функции:

- `processing_published_comic()` - функция вызывается 2 раза - в начале выполнения скрипта она получает список ранее опубликованных комиксов из файла `published_comics.json`. В конце выполнения скрипта она перезаписывает указанный файл, добавляя к списку номер только что опубликованного комикса.
- `get_random_comic_number()` - возвращает случайный номер комикса для публикации из списка доступных на сайте https://xkcd.com. Из списка исключаются ранее публиковавшиеся комиксы. 
- `fetch_comic_pic_title_ext()` - сохраняет скаченный файл комикса, возвращает текстовое описание комикса и расширение файла.

За публикацию комиксов в группе ВК отвечает одна функция:

- `fetch_upload_vk()` - в зависимости от переданных ей параметров получает от API ВК адрес для загрузки файла, отправляет файл в ВК, сохраняет его там и публикует на стене указанной группы.

## Цель проекта

Создание простого средства для автоматизации ведения групп в социальной сети ВКонтакте.

